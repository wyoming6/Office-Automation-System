{"remainingRequest":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/system/sysMenu/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/system/sysMenu/list.vue","mtime":1683509450715},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvc3lzdGVtL3N5c01lbnUnCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIGlkOiAnJywKICBwYXJlbnRJZDogJycsCiAgbmFtZTogJycsCiAgdHlwZTogMCwKICBwYXRoOiAnJywKICBjb21wb25lbnQ6ICcnLAogIHBlcm1zOiAnJywKICBpY29uOiAnJywKICBzb3J0VmFsdWU6IDEsCiAgc3RhdHVzOiAxCn0KZXhwb3J0IGRlZmF1bHQgewogIC8vIOWumuS5ieaVsOaNrgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzeXNNZW51TGlzdDogW10sCiAgICAgIGV4cGFuZEtleXM6IFtdLCAvLyDpnIDopoHoh6rliqjlsZXlvIDnmoTpobkKCiAgICAgIHR5cGVEaXNhYmxlZDogZmFsc2UsCiAgICAgIHR5cGUwRGlzYWJsZWQ6IGZhbHNlLAogICAgICB0eXBlMURpc2FibGVkOiBmYWxzZSwKICAgICAgdHlwZTJEaXNhYmxlZDogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAnJywKCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzeXNNZW51OiBkZWZhdWx0Rm9ybSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKCiAgICAgIGljb25MaXN0OiBbCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXMtdG9vbHMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXMtY3VzdG9tIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zZXR0aW5nIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi11c2VyLXNvbGlkIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zLWhlbHAiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXBob25lIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zLXVuZm9sZCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1vcGVyYXRpb24iLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLW1vcmUtb3V0bGluZSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1jaGVjayIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tdGlja2V0cyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1nb29kcyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tZG9jdW1lbnQtcmVtb3ZlIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi13YXJuaW5nIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi13YXJuaW5nLW91dGxpbmUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXF1ZXN0aW9uIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1pbmZvIiwKICAgICAgICB9CiAgICAgIF0KICAgIH0KICB9LAoKICAvLyDlvZPpobXpnaLliqDovb3ml7bojrflj5bmlbDmja4KICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOiwg+eUqGFwaeWxguiOt+WPluaVsOaNruW6k+S4reeahOaVsOaNrgogICAgZmV0Y2hEYXRhKCkgewogICAgICBjb25zb2xlLmxvZygn5Yqg6L295YiX6KGoJykKICAgICAgYXBpLmZpbmROb2RlcygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuc3lzTWVudUxpc3QgPSByZXNwb25zZS5kYXRhCiAgICAgICAgY29uc29sZS5sb2codGhpcy5zeXNNZW51TGlzdCkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTliKDpmaTmlbDmja4KICAgIHJlbW92ZURhdGFCeUlkKGlkKSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsgLy8gcHJvbWlzZQogICAgICAgIC8vIOeCueWHu+ehruWumu+8jOi/nOeoi+iwg+eUqGFqYXgKICAgICAgICByZXR1cm4gYXBpLnJlbW92ZUJ5SWQoaWQpCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+WPlua2iOWIoOmZpCcpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLS0KICAgIGFkZChyb3cpewogICAgICBkZWJ1Z2dlcgogICAgICB0aGlzLnR5cGVEaXNhYmxlZCA9IGZhbHNlCiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5re75Yqg5LiL57qn6IqC54K5JwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCgogICAgICB0aGlzLnN5c01lbnUgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Rm9ybSkKICAgICAgdGhpcy5zeXNNZW51LmlkID0gJycKICAgICAgaWYocm93KSB7CiAgICAgICAgdGhpcy5zeXNNZW51LnBhcmVudElkID0gcm93LmlkCiAgICAgICAgdGhpcy5zeXNNZW51LnBhcmVudE5hbWUgPSByb3cubmFtZQogICAgICAgIC8vdGhpcy5zeXNNZW51LmNvbXBvbmVudCA9ICdQYXJlbnRWaWV3JwogICAgICAgIGlmKHJvdy50eXBlID09PSAwKSB7CiAgICAgICAgICB0aGlzLnN5c01lbnUudHlwZSA9IDEKICAgICAgICAgIHRoaXMudHlwZURpc2FibGVkID0gZmFsc2UKICAgICAgICAgIHRoaXMudHlwZTBEaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICB0aGlzLnR5cGUxRGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgdGhpcy50eXBlMkRpc2FibGVkID0gdHJ1ZQogICAgICAgIH0gZWxzZSBpZihyb3cudHlwZSA9PT0gMSkgewogICAgICAgICAgdGhpcy5zeXNNZW51LnR5cGUgPSAyCiAgICAgICAgICB0aGlzLnR5cGVEaXNhYmxlZCA9IHRydWUKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfmt7vliqDnm67lvZXoioLngrknCiAgICAgICAgdGhpcy5zeXNNZW51LnR5cGUgPSAwCiAgICAgICAgdGhpcy5zeXNNZW51LmNvbXBvbmVudCA9ICdMYXlvdXQnCiAgICAgICAgdGhpcy5zeXNNZW51LnBhcmVudElkID0gMAogICAgICAgIHRoaXMudHlwZURpc2FibGVkID0gdHJ1ZQogICAgICB9CiAgICB9LAoKICAgIGVkaXQocm93KSB7CiAgICAgIGRlYnVnZ2VyCiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5L+u5pS56IqC54K5JwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCgogICAgICB0aGlzLnN5c01lbnUgPSBPYmplY3QuYXNzaWduKHt9LCByb3cpCiAgICAgIHRoaXMudHlwZURpc2FibGVkID0gdHJ1ZQogICAgfSwKCiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIGlmKHRoaXMuc3lzTWVudS50eXBlID09PSAwICYmIHRoaXMuc3lzTWVudS5wYXJlbnRJZCAhPT0gMCkgewogICAgICAgIHRoaXMuc3lzTWVudS5jb21wb25lbnQgPSAnUGFyZW50VmlldycKICAgICAgfQogICAgICB0aGlzLiRyZWZzLmRhdGFGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgICAgIGlmICghdGhpcy5zeXNNZW51LmlkKSB7CiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOaWsOWingogICAgc2F2ZURhdGEoKSB7CiAgICAgIGFwaS5zYXZlKHRoaXMuc3lzTWVudSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+aTjeS9nOaIkOWKnycpCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLmZldGNoRGF0YSh0aGlzLnBhZ2UpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOagueaNrmlk5pu05paw6K6w5b2VCiAgICB1cGRhdGVEYXRhKCkgewogICAgICBhcGkudXBkYXRlQnlJZCh0aGlzLnN5c01lbnUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlIHx8ICfmk43kvZzmiJDlip8nKQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysMenu","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 工具条 -->\n    <div class=\"tools-div\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add()\">添 加</el-button>\n    </div>\n    <el-table\n      :data=\"sysMenuList\"\n      style=\"width: 100%;margin-bottom: 20px;margin-top: 10px;\"\n      row-key=\"id\"\n      border\n      :default-expand-all=\"false\"\n      :tree-props=\"{children: 'children'}\">\n\n      <el-table-column prop=\"name\" label=\"菜单名称\" width=\"160\"/>\n      <el-table-column label=\"图标\">\n        <template slot-scope=\"scope\">\n          <i :class=\"scope.row.icon\"></i>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"perms\" label=\"权限标识\" width=\"160\"/>\n      <el-table-column prop=\"path\" label=\"路由地址\" width=\"120\"/>\n      <el-table-column prop=\"component\" label=\"组件路径\" width=\"160\"/>\n      <el-table-column prop=\"sortValue\" label=\"排序\" width=\"60\"/>\n      <el-table-column label=\"状态\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.status === 1\" disabled=\"true\">\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\"/>\n      <el-table-column label=\"操作\" width=\"180\" align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"success\" v-if=\"scope.row.type !== 2\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add(scope.row)\" title=\"添加下级节点\"/>\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row)\" title=\"修改\"/>\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\" title=\"删除\" :disabled=\"scope.row.children.length > 0\"/>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"40%\" >\n      <el-form ref=\"dataForm\" :model=\"sysMenu\" label-width=\"150px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"上级部门\" v-if=\"sysMenu.id === ''\">\n          <el-input v-model=\"sysMenu.parentName\" disabled=\"true\"/>\n        </el-form-item>\n        <el-form-item label=\"菜单类型\" prop=\"type\">\n          <el-radio-group v-model=\"sysMenu.type\" :disabled=\"typeDisabled\">\n            <el-radio :label=\"0\" :disabled=\"type0Disabled\">目录</el-radio>\n            <el-radio :label=\"1\" :disabled=\"type1Disabled\">菜单</el-radio>\n            <el-radio :label=\"2\" :disabled=\"type2Disabled\">按钮</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"sysMenu.name\"/>\n        </el-form-item>\n        <el-form-item label=\"图标\" prop=\"icon\" v-if=\"sysMenu.type !== 2\">\n          <el-select v-model=\"sysMenu.icon\" clearable>\n            <el-option v-for=\"item in iconList\" :key=\"item.class\" :label=\"item.class\" :value=\"item.class\">\n            <span style=\"float: left;\">\n             <i :class=\"item.class\"></i>  <!-- 如果动态显示图标，这里添加判断 -->\n            </span>\n              <span style=\"padding-left: 6px;\">{{ item.class }}</span>\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"排序\">\n          <el-input-number v-model=\"sysMenu.sortValue\" controls-position=\"right\" :min=\"0\" />\n        </el-form-item>\n        <el-form-item prop=\"path\">\n              <span slot=\"label\">\n                <el-tooltip content=\"访问的路由地址，如：`sysUser`\" placement=\"top\">\n                <i class=\"el-icon-question\"></i>\n                </el-tooltip>\n                路由地址\n              </span>\n          <el-input v-model=\"sysMenu.path\" placeholder=\"请输入路由地址\" />\n        </el-form-item>\n        <el-form-item prop=\"component\" v-if=\"sysMenu.type !== 0\">\n              <span slot=\"label\">\n                <el-tooltip content=\"访问的组件路径，如：`system/user/index`，默认在`views`目录下\" placement=\"top\">\n                <i class=\"el-icon-question\"></i>\n                </el-tooltip>\n                组件路径\n              </span>\n          <el-input v-model=\"sysMenu.component\" placeholder=\"请输入组件路径\" />\n        </el-form-item>\n        <el-form-item v-if=\"sysMenu.type === 2\">\n          <el-input v-model=\"sysMenu.perms\" placeholder=\"请输入权限标识\" maxlength=\"100\" />\n          <span slot=\"label\">\n                <el-tooltip content=\"控制器中定义的权限字符，如：@PreAuthorize(hasAuthority('bnt.sysRole.list'))\" placement=\"top\">\n                <i class=\"el-icon-question\"></i>\n                </el-tooltip>\n                权限字符\n              </span>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"type\">\n          <el-radio-group v-model=\"sysMenu.status\">\n            <el-radio :label=\"1\">正常</el-radio>\n            <el-radio :label=\"0\">停用</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n\n<script>\nimport api from '@/api/system/sysMenu'\nconst defaultForm = {\n  id: '',\n  parentId: '',\n  name: '',\n  type: 0,\n  path: '',\n  component: '',\n  perms: '',\n  icon: '',\n  sortValue: 1,\n  status: 1\n}\nexport default {\n  // 定义数据\n  data() {\n    return {\n      sysMenuList: [],\n      expandKeys: [], // 需要自动展开的项\n\n      typeDisabled: false,\n      type0Disabled: false,\n      type1Disabled: false,\n      type2Disabled: false,\n      dialogTitle: '',\n\n      dialogVisible: false,\n      sysMenu: defaultForm,\n      saveBtnDisabled: false,\n\n      iconList: [\n        {\n          class: \"el-icon-s-tools\",\n        },\n        {\n          class: \"el-icon-s-custom\",\n        },\n        {\n          class: \"el-icon-setting\",\n        },\n        {\n          class: \"el-icon-user-solid\",\n        },\n        {\n          class: \"el-icon-s-help\",\n        },\n        {\n          class: \"el-icon-phone\",\n        },\n        {\n          class: \"el-icon-s-unfold\",\n        },\n        {\n          class: \"el-icon-s-operation\",\n        },\n        {\n          class: \"el-icon-more-outline\",\n        },\n        {\n          class: \"el-icon-s-check\",\n        },\n        {\n          class: \"el-icon-tickets\",\n        },\n        {\n          class: \"el-icon-s-goods\",\n        },\n        {\n          class: \"el-icon-document-remove\",\n        },\n        {\n          class: \"el-icon-warning\",\n        },\n        {\n          class: \"el-icon-warning-outline\",\n        },\n        {\n          class: \"el-icon-question\",\n        },\n        {\n          class: \"el-icon-info\",\n        }\n      ]\n    }\n  },\n\n  // 当页面加载时获取数据\n  created() {\n    this.fetchData()\n  },\n\n  methods: {\n    // 调用api层获取数据库中的数据\n    fetchData() {\n      console.log('加载列表')\n      api.findNodes().then(response => {\n        this.sysMenuList = response.data\n        console.log(this.sysMenuList)\n      })\n    },\n\n    // 根据id删除数据\n    removeDataById(id) {\n      // debugger\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        return api.removeById(id)\n      }).then((response) => {\n        this.fetchData()\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n      }).catch(() => {\n         this.$message.info('取消删除')\n      })\n    },\n\n    // -------------\n    add(row){\n      debugger\n      this.typeDisabled = false\n      this.dialogTitle = '添加下级节点'\n      this.dialogVisible = true\n\n      this.sysMenu = Object.assign({}, defaultForm)\n      this.sysMenu.id = ''\n      if(row) {\n        this.sysMenu.parentId = row.id\n        this.sysMenu.parentName = row.name\n        //this.sysMenu.component = 'ParentView'\n        if(row.type === 0) {\n          this.sysMenu.type = 1\n          this.typeDisabled = false\n          this.type0Disabled = false\n          this.type1Disabled = false\n          this.type2Disabled = true\n        } else if(row.type === 1) {\n          this.sysMenu.type = 2\n          this.typeDisabled = true\n        }\n      } else {\n        this.dialogTitle = '添加目录节点'\n        this.sysMenu.type = 0\n        this.sysMenu.component = 'Layout'\n        this.sysMenu.parentId = 0\n        this.typeDisabled = true\n      }\n    },\n\n    edit(row) {\n      debugger\n      this.dialogTitle = '修改节点'\n      this.dialogVisible = true\n\n      this.sysMenu = Object.assign({}, row)\n      this.typeDisabled = true\n    },\n\n    saveOrUpdate() {\n      if(this.sysMenu.type === 0 && this.sysMenu.parentId !== 0) {\n        this.sysMenu.component = 'ParentView'\n      }\n      this.$refs.dataForm.validate(valid => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.sysMenu.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.sysMenu).then(response => {\n        this.$message.success(response.message || '操作成功')\n        this.dialogVisible = false\n        this.fetchData(this.page)\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.sysMenu).then(response => {\n        this.$message.success(response.message || '操作成功')\n        this.dialogVisible = false\n        this.fetchData()\n      })\n    }\n  }\n}\n</script>"]}]}