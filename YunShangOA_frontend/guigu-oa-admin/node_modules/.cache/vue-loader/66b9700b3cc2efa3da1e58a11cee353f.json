{"remainingRequest":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/system/sysUser/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/system/sysUser/list.vue","mtime":1683422377754},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvc3lzdGVtL3N5c1VzZXInCmltcG9ydCByb2xlQXBpIGZyb20gJ0AvYXBpL3N5c3RlbS9zeXNSb2xlJwpjb25zdCBkZWZhdWx0Rm9ybSA9IHsKICBpZDogJycsCiAgdXNlcm5hbWU6ICcnLAogIHBhc3N3b3JkOiAnJywKICBuYW1lOiAnJywKICBwaG9uZTogJycsCiAgc3RhdHVzOiAxCn0KZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwgLy8g5pWw5o2u5piv5ZCm5q2j5Zyo5Yqg6L29CiAgICAgIGxpc3Q6IG51bGwsIC8vIGJhbm5lcuWIl+ihqAogICAgICB0b3RhbDogMCwgLy8g5pWw5o2u5bqT5Lit55qE5oC76K6w5b2V5pWwCiAgICAgIHBhZ2U6IDEsIC8vIOm7mOiupOmhteeggQogICAgICBsaW1pdDogMTAsIC8vIOavj+mhteiusOW9leaVsAogICAgICBzZWFyY2hPYmo6IHt9LCAvLyDmn6Xor6LooajljZXlr7nosaEKCiAgICAgIGNyZWF0ZVRpbWVzOiBbXSwKCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzeXNVc2VyOiBkZWZhdWx0Rm9ybSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKCiAgICAgIGRpYWxvZ1JvbGVWaXNpYmxlOiBmYWxzZSwKICAgICAgYWxsUm9sZXM6IFtdLCAvLyDmiYDmnInop5LoibLliJfooagKICAgICAgdXNlclJvbGVJZHM6IFtdLCAvLyDnlKjmiLfnmoTop5LoibJJROeahOWIl+ihqAogICAgICBpc0luZGV0ZXJtaW5hdGU6IGZhbHNlLCAvLyDmmK/lkKbmmK/kuI3noa7lrprnmoQKICAgICAgY2hlY2tBbGw6IGZhbHNlIC8vIOaYr+WQpuWFqOmAiQogICAgfQogIH0sCgogIC8vIOeUn+WRveWRqOacn+WHveaVsO+8muWGheWtmOWHhuWkh+WujOavle+8jOmhtemdouWwmuacqua4suafkwogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnbGlzdCBjcmVhdGVkLi4uLi4uJykKICAgIHRoaXMuZmV0Y2hEYXRhKCkKCiAgICByb2xlQXBpLmZpbmRBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KQogIH0sCgogIC8vIOeUn+WRveWRqOacn+WHveaVsO+8muWGheWtmOWHhuWkh+WujOavle+8jOmhtemdoua4suafk+aIkOWKnwogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnbGlzdCBtb3VudGVkLi4uLi4uJykKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyDlvZPpobXnoIHlj5HnlJ/mlLnlj5jnmoTml7blgJkKICAgIGNoYW5nZVNpemUoc2l6ZSkgewogICAgICBjb25zb2xlLmxvZyhzaXplKQogICAgICB0aGlzLmxpbWl0ID0gc2l6ZQogICAgICB0aGlzLmZldGNoRGF0YSgxKQogICAgfSwKCiAgICAvLyDliqDovb1iYW5uZXLliJfooajmlbDmja4KICAgIGZldGNoRGF0YShwYWdlID0gMSkgewogICAgICBkZWJ1Z2dlcgogICAgICB0aGlzLnBhZ2UgPSBwYWdlCiAgICAgIGNvbnNvbGUubG9nKCfnv7vpobXjgILjgILjgIInICsgdGhpcy5wYWdlKQoKICAgICAgaWYodGhpcy5jcmVhdGVUaW1lcyAmJiB0aGlzLmNyZWF0ZVRpbWVzLmxlbmd0aCA9PTIpIHsKICAgICAgICB0aGlzLnNlYXJjaE9iai5jcmVhdGVUaW1lQmVnaW4gPSB0aGlzLmNyZWF0ZVRpbWVzWzBdCiAgICAgICAgdGhpcy5zZWFyY2hPYmouY3JlYXRlVGltZUVuZCA9IHRoaXMuY3JlYXRlVGltZXNbMV0KICAgICAgfQoKICAgICAgYXBpLmdldFBhZ2VMaXN0KHRoaXMucGFnZSwgdGhpcy5saW1pdCwgdGhpcy5zZWFyY2hPYmopLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgLy90aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QKICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3JkcwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwKCiAgICAgICAgICAvLyDmlbDmja7liqDovb3lubbnu5HlrprmiJDlip8KICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgIH0KICAgICAgKQogICAgfSwKCiAgICAvLyDph43nva7mn6Xor6LooajljZUKICAgIHJlc2V0RGF0YSgpIHsKICAgICAgY29uc29sZS5sb2coJ+mHjee9ruafpeivouihqOWNlScpCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge30KICAgICAgdGhpcy5jcmVhdGVUaW1lcyA9IFtdCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgIH0sCgogICAgLy8g5qC55o2uaWTliKDpmaTmlbDmja4KICAgIHJlbW92ZURhdGFCeUlkKGlkKSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsgLy8gcHJvbWlzZQogICAgICAgIC8vIOeCueWHu+ehruWumu+8jOi/nOeoi+iwg+eUqGFqYXgKICAgICAgICByZXR1cm4gYXBpLnJlbW92ZUJ5SWQoaWQpCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5mZXRjaERhdGEodGhpcy5wYWdlKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlIHx8ICfliKDpmaTmiJDlip8nKQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCgogICAgLy8gLS0tLS0tLS0tLS0tLQogICAgYWRkKCl7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5zeXNVc2VyID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEZvcm0pCiAgICB9LAoKICAgIGVkaXQoaWQpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpCiAgICB9LAoKICAgIGZldGNoRGF0YUJ5SWQoaWQpIHsKICAgICAgYXBpLmdldEJ5SWQoaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuc3lzVXNlciA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0sCgogICAgc2F2ZU9yVXBkYXRlKCkgewogICAgICB0aGlzLiRyZWZzLmRhdGFGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgICAgIGlmICghdGhpcy5zeXNVc2VyLmlkKSB7CiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOaWsOWingogICAgc2F2ZURhdGEoKSB7CiAgICAgIGFwaS5zYXZlKHRoaXMuc3lzVXNlcikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmk43kvZzmiJDlip8nKQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5mZXRjaERhdGEodGhpcy5wYWdlKQogICAgICB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YSgpIHsKICAgICAgYXBpLnVwZGF0ZUJ5SWQodGhpcy5zeXNVc2VyKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJykKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuZmV0Y2hEYXRhKHRoaXMucGFnZSkKICAgICAgfSkKICAgIH0sCgogICAgc2hvd0Fzc2lnblJvbGUgKHJvdykgewogICAgICB0aGlzLnN5c1VzZXIgPSByb3cKICAgICAgdGhpcy5kaWFsb2dSb2xlVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5nZXRSb2xlcygpCiAgICB9LAoKICAgIGdldFJvbGVzICgpIHsKICAgICAgcm9sZUFwaS5nZXRSb2xlcyh0aGlzLnN5c1VzZXIuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHthbGxSb2xlc0xpc3QsIGFzc2dpblJvbGVMaXN0fSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLmFsbFJvbGVzID0gYWxsUm9sZXNMaXN0CiAgICAgICAgdGhpcy51c2VyUm9sZUlkcyA9IGFzc2dpblJvbGVMaXN0Lm1hcChpdGVtID0+IGl0ZW0uaWQpCiAgICAgICAgdGhpcy5jaGVja0FsbCA9IGFsbFJvbGVzTGlzdC5sZW5ndGg9PT1hc3NnaW5Sb2xlTGlzdC5sZW5ndGgKICAgICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IGFzc2dpblJvbGVMaXN0Lmxlbmd0aD4wICYmIGFzc2dpblJvbGVMaXN0Lmxlbmd0aDxhbGxSb2xlc0xpc3QubGVuZ3RoCiAgICAgIH0pCiAgICB9LAoKICAgIC8qCiAgICDlhajpgInli77pgInnirbmgIHlj5HnlJ/mlLnlj5jnmoTnm5HlkKwKICAgICovCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZSAodmFsdWUpIHsvLyB2YWx1ZSDlvZPliY3li77pgInnirbmgIF0cnVlL2ZhbHNlCiAgICAgIC8vIOWmguaenOW9k+WJjeWFqOmAiSwgdXNlclJvbGVJZHPlsLHmmK/miYDmnInop5LoibJpZOeahOaVsOe7hCwg5ZCm5YiZ5piv56m65pWw57uECiAgICAgIHRoaXMudXNlclJvbGVJZHMgPSB2YWx1ZSA/IHRoaXMuYWxsUm9sZXMubWFwKGl0ZW0gPT4gaXRlbS5pZCkgOiBbXQogICAgICAvLyDlpoLmnpzlvZPliY3kuI3mmK/lhajpgInkuZ/kuI3lhajkuI3pgInml7YsIOaMh+WumuS4umZhbHNlCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gZmFsc2UKICAgIH0sCgogICAgLyoKICAgIOinkuiJsuWIl+ihqOmAieS4remhueWPkeeUn+aUueWPmOeahOebkeWQrAogICAgKi8KICAgIGhhbmRsZUNoZWNrZWRDaGFuZ2UgKHZhbHVlKSB7CiAgICAgIGNvbnN0IHt1c2VyUm9sZUlkcywgYWxsUm9sZXN9ID0gdGhpcwogICAgICB0aGlzLmNoZWNrQWxsID0gdXNlclJvbGVJZHMubGVuZ3RoID09PSBhbGxSb2xlcy5sZW5ndGggJiYgYWxsUm9sZXMubGVuZ3RoPjAKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSB1c2VyUm9sZUlkcy5sZW5ndGg+MCAmJiB1c2VyUm9sZUlkcy5sZW5ndGg8YWxsUm9sZXMubGVuZ3RoCiAgICB9LAoKICAgIGFzc2lnblJvbGUgKCkgewogICAgICBsZXQgYXNzZ2luUm9sZVZvID0gewogICAgICAgIHVzZXJJZDogdGhpcy5zeXNVc2VyLmlkLAogICAgICAgIHJvbGVJZExpc3Q6IHRoaXMudXNlclJvbGVJZHMKICAgICAgfQogICAgICByb2xlQXBpLmFzc2lnblJvbGVzKGFzc2dpblJvbGVWbykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+WIhumFjeinkuiJsuaIkOWKnycpCiAgICAgICAgdGhpcy5kaWFsb2dSb2xlVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5mZXRjaERhdGEodGhpcy5wYWdlKQogICAgICB9KQogICAgfSwKCiAgICBzd2l0Y2hTdGF0dXMocm93KSB7CiAgICAgIHJvdy5zdGF0dXMgPSByb3cuc3RhdHVzID09PSAxID8gMCA6IDEKICAgICAgYXBpLnVwZGF0ZVN0YXR1cyhyb3cuaWQsIHJvdy5zdGF0dXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJykKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysUser","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <div class=\"search-div\">\n      <el-form label-width=\"70px\" size=\"small\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"关 键 字\">\n              <el-input style=\"width: 95%\" v-model=\"searchObj.keyword\" placeholder=\"用户名/姓名/手机号码\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"操作时间\">\n              <el-date-picker\n                v-model=\"createTimes\"\n                type=\"datetimerange\"\n                range-separator=\"至\"\n                start-placeholder=\"开始时间\"\n                end-placeholder=\"结束时间\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                style=\"margin-right: 10px;width: 100%;\"\n              />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row style=\"display:flex\">\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" :loading=\"loading\" @click=\"fetchData()\">搜索</el-button>\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">重置</el-button>\n        </el-row>\n      </el-form>\n    </div>\n\n    <!-- 工具条 -->\n    <div class=\"tools-div\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\">添 加</el-button>\n    </div>\n\n    <!-- 列表 -->\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      stripe\n      border\n      style=\"width: 100%;margin-top: 10px;\">\n\n      <el-table-column\n        label=\"序号\"\n        width=\"70\"\n        align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"100\"/>\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"70\"/>\n      <el-table-column prop=\"phone\" label=\"手机\" width=\"120\"/>\n      <el-table-column prop=\"postName\" label=\"岗位\" width=\"100\"/>\n      <el-table-column prop=\"deptName\" label=\"部门\" width=\"100\"/>\n      <el-table-column label=\"所属角色\" width=\"130\">\n        <template slot-scope=\"scope\">\n          <span v-for=\"item in scope.row.roleList\" :key=\"item.id\" style=\"margin-right: 10px;\">{{ item.roleName }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.status === 1\"\n            @change=\"switchStatus(scope.row)\">\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\"/>\n\n      <el-table-column label=\"操作\" width=\"180\" align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row.id)\" title=\"修改\"/>\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\" title=\"删除\" />\n          <el-button type=\"warning\" icon=\"el-icon-baseball\" size=\"mini\" @click=\"showAssignRole(scope.row)\" title=\"分配角色\"/>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"page\"\n      :total=\"total\"\n      :page-size=\"limit\"\n      :page-sizes=\"[5, 10, 20, 30, 40, 50, 100]\"\n      style=\"padding: 30px 0; text-align: center;\"\n      layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\n      @current-change=\"fetchData\"\n      @size-change=\"changeSize\"\n    />\n\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\" >\n      <el-form ref=\"dataForm\" :model=\"sysUser\"  label-width=\"100px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"sysUser.username\"/>\n        </el-form-item>\n        <el-form-item v-if=\"!sysUser.id\" label=\"密码\" prop=\"password\">\n          <el-input v-model=\"sysUser.password\" type=\"password\"/>\n        </el-form-item>\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input v-model=\"sysUser.name\"/>\n        </el-form-item>\n        <el-form-item label=\"手机\" prop=\"phone\">\n          <el-input v-model=\"sysUser.phone\"/>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"分配角色\" :visible.sync=\"dialogRoleVisible\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input disabled :value=\"sysUser.username\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"角色列表\">\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n          <div style=\"margin: 15px 0;\"></div>\n          <el-checkbox-group v-model=\"userRoleIds\" @change=\"handleCheckedChange\">\n            <el-checkbox v-for=\"role in allRoles\" :key=\"role.id\" :label=\"role.id\">{{role.roleName}}</el-checkbox>\n          </el-checkbox-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button type=\"primary\" @click=\"assignRole\" size=\"small\">保存</el-button>\n        <el-button @click=\"dialogRoleVisible = false\" size=\"small\">取消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/system/sysUser'\nimport roleApi from '@/api/system/sysRole'\nconst defaultForm = {\n  id: '',\n  username: '',\n  password: '',\n  name: '',\n  phone: '',\n  status: 1\n}\nexport default {\n  data() {\n    return {\n      listLoading: true, // 数据是否正在加载\n      list: null, // banner列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 10, // 每页记录数\n      searchObj: {}, // 查询表单对象\n\n      createTimes: [],\n\n      dialogVisible: false,\n      sysUser: defaultForm,\n      saveBtnDisabled: false,\n\n      dialogRoleVisible: false,\n      allRoles: [], // 所有角色列表\n      userRoleIds: [], // 用户的角色ID的列表\n      isIndeterminate: false, // 是否是不确定的\n      checkAll: false // 是否全选\n    }\n  },\n\n  // 生命周期函数：内存准备完毕，页面尚未渲染\n  created() {\n    console.log('list created......')\n    this.fetchData()\n\n    roleApi.findAll().then(response => {\n      this.roleList = response.data;\n    })\n  },\n\n  // 生命周期函数：内存准备完毕，页面渲染成功\n  mounted() {\n    console.log('list mounted......')\n  },\n\n  methods: {\n    // 当页码发生改变的时候\n    changeSize(size) {\n      console.log(size)\n      this.limit = size\n      this.fetchData(1)\n    },\n\n    // 加载banner列表数据\n    fetchData(page = 1) {\n      debugger\n      this.page = page\n      console.log('翻页。。。' + this.page)\n\n      if(this.createTimes && this.createTimes.length ==2) {\n        this.searchObj.createTimeBegin = this.createTimes[0]\n        this.searchObj.createTimeEnd = this.createTimes[1]\n      }\n\n      api.getPageList(this.page, this.limit, this.searchObj).then(\n        response => {\n          //this.list = response.data.list\n          this.list = response.data.records\n          this.total = response.data.total\n\n          // 数据加载并绑定成功\n          this.listLoading = false\n        }\n      )\n    },\n\n    // 重置查询表单\n    resetData() {\n      console.log('重置查询表单')\n      this.searchObj = {}\n      this.createTimes = []\n      this.fetchData()\n    },\n\n    // 根据id删除数据\n    removeDataById(id) {\n      // debugger\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        return api.removeById(id)\n      }).then((response) => {\n        this.fetchData(this.page)\n        this.$message.success(response.message || '删除成功')\n      }).catch(() => {\n         this.$message.info('取消删除')\n      })\n    },\n\n    // -------------\n    add(){\n      this.dialogVisible = true\n      this.sysUser = Object.assign({}, defaultForm)\n    },\n\n    edit(id) {\n      this.dialogVisible = true\n      this.fetchDataById(id)\n    },\n\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        this.sysUser = response.data\n      })\n    },\n\n    saveOrUpdate() {\n      this.$refs.dataForm.validate(valid => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.sysUser.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.sysUser).then(response => {\n        this.$message.success('操作成功')\n        this.dialogVisible = false\n        this.fetchData(this.page)\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.sysUser).then(response => {\n        this.$message.success(response.message || '操作成功')\n        this.dialogVisible = false\n        this.fetchData(this.page)\n      })\n    },\n\n    showAssignRole (row) {\n      this.sysUser = row\n      this.dialogRoleVisible = true\n      this.getRoles()\n    },\n\n    getRoles () {\n      roleApi.getRoles(this.sysUser.id).then(response => {\n        const {allRolesList, assginRoleList} = response.data\n        this.allRoles = allRolesList\n        this.userRoleIds = assginRoleList.map(item => item.id)\n        this.checkAll = allRolesList.length===assginRoleList.length\n        this.isIndeterminate = assginRoleList.length>0 && assginRoleList.length<allRolesList.length\n      })\n    },\n\n    /*\n    全选勾选状态发生改变的监听\n    */\n    handleCheckAllChange (value) {// value 当前勾选状态true/false\n      // 如果当前全选, userRoleIds就是所有角色id的数组, 否则是空数组\n      this.userRoleIds = value ? this.allRoles.map(item => item.id) : []\n      // 如果当前不是全选也不全不选时, 指定为false\n      this.isIndeterminate = false\n    },\n\n    /*\n    角色列表选中项发生改变的监听\n    */\n    handleCheckedChange (value) {\n      const {userRoleIds, allRoles} = this\n      this.checkAll = userRoleIds.length === allRoles.length && allRoles.length>0\n      this.isIndeterminate = userRoleIds.length>0 && userRoleIds.length<allRoles.length\n    },\n\n    assignRole () {\n      let assginRoleVo = {\n        userId: this.sysUser.id,\n        roleIdList: this.userRoleIds\n      }\n      roleApi.assignRoles(assginRoleVo).then(response => {\n        this.$message.success(response.message || '分配角色成功')\n        this.dialogRoleVisible = false\n        this.fetchData(this.page)\n      })\n    },\n\n    switchStatus(row) {\n      row.status = row.status === 1 ? 0 : 1\n      api.updateStatus(row.id, row.status).then(response => {\n        if (response.code) {\n          this.$message.success(response.message || '操作成功')\n          this.dialogVisible = false\n          this.fetchData()\n        }\n      })\n    }\n  }\n}\n</script>"]}]}