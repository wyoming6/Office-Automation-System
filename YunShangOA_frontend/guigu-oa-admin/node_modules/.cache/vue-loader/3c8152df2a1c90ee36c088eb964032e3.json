{"remainingRequest":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/processSet/processTemplate/templateSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/processSet/processTemplate/templateSet.vue","mtime":1684965622138},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvcHJvY2Vzcy9wcm9jZXNzVGVtcGxhdGUnCmltcG9ydCBwcm9jZXNzVHlwZUFwaSBmcm9tICdAL2FwaS9wcm9jZXNzL3Byb2Nlc3NUeXBlJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIGlkOiAnJywKICBuYW1lOiAnJywKICBpY29uVXJsOiAnJywKICBmb3JtUHJvcHM6ICcnLAogIGZvcm1PcHRpb25zOiAnJywKICBwcm9jZXNzRGVmaW5pdGlvbktleTogJycsCiAgcHJvY2Vzc0RlZmluaXRpb25QYXRoOiAnJywKICBkZXNjcmlwdGlvbjogJycKfQpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0ZXBJbmRleDogMSwKICAgICAgcHJvY2Vzc1R5cGVMaXN0OiBbXSwKICAgICAgcHJvY2Vzc1RlbXBsYXRlOiBkZWZhdWx0Rm9ybSwKICAgICAgaWNvblVybExpc3Q6IFsKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMXQ2OTVDRllxSzFSalNaTGVYWGJYcHBYYS0xMDItMTAyLnBuZycsIHRhZzogJ+ivt+WBhycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWJIT1dDU3pxSzFSalNaRmpYWGJsQ0ZYYS0xMTItMTEyLnBuZycsIHRhZzogJ+WHuuW3ricgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWNiQ1lDUFRwSzFSalNaS1BYWGEzVXBYYS0xMTItMTEyLnBuZycsIHRhZzogJ+acuuelqOWHuuW3ricgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWNiQ1lDUFRwSzFSalNaS1BYWGEzVXBYYS0xMTItMTEyLnBuZycsIHRhZzogJ+acuuelqOaUueetvicgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWU3NmxDT0xhSzFSalNaRnhYWGFtUEZYYS0xMTItMTEyLnBuZycsIHRhZzogJ+WkluWHuicgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMVlmYTBDRzZxSzFSalNaRm1YWFgwUEZYYS0xMTItMTEyLnBuZycsIHRhZzogJ+ihpeWNoeeUs+ivtycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMVk4UGxDTmphSzFSalNaS3pYWFhWd1hYYS0xMTItMTEyLnBuZycsIHRhZzogJ+WKoOePrScgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMTFYOTlDTlRwSzFSalNaRktYWGEyd1hYYS0xMDItMTAyLnBuZycsIHRhZzogJ+WxheWutumalOemuycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMV9ZRy5DT3JwSzFSalNaRmhYWFhTZFhYYS0xMDItMTAyLnBuZycsIHRhZzogJ+ivt+WBhycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMTNjYTFDTURxSzFSalNaU3lYWGF4RVZYYS0xMDItMTAyLnBuZycsIHRhZzogJ+iwg+WylycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMVU5aUJDU3pxSzFSalNaUGNYWGJUZXBYYS0xMDItMTAyLnBuZycsIHRhZzogJ+emu+iBjCcgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMTFwU19DRnpxSzFSalNaU2dYWGNwQVZYYS0xMDItMTAyLnBuZycsIHRhZzogJ+i0ueeUqOeUs+ivtycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMXQ2OTVDRllxSzFSalNaTGVYWGJYcHBYYS0xMDItMTAyLnBuZycsIHRhZzogJ+eUqOeroOeUs+ivtycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMTNmX2FDUXpvSzFSalNaRmxYWGFpNFZYYS0xMDItMTAyLnBuZycsIHRhZzogJ+aQuueroOWkluWHuicgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMV9ZRy5DT3JwSzFSalNaRmhYWFhTZFhYYS0xMDItMTAyLnBuZycsIHRhZzogJ+Wtpuacn+WGheWIhuacnycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMV9ZRy5DT3JwSzFSalNaRmhYWFhTZFhYYS0xMDItMTAyLnBuZycsIHRhZzogJ+eJueauiuWtpui0uScgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMVlmYTBDRzZxSzFSalNaRm1YWFgwUEZYYS0xMTItMTEyLnBuZycsIHRhZzogJ+WFheWAvOWNoeeUs+mihicgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWU3NmxDT0xhSzFSalNaRnhYWGFtUEZYYS0xMTItMTEyLnBuZycsIHRhZzogJ+ekvOWTgeeUs+mihicgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMUZORy5DTUhxSzFSalNaRmdYWGE3SlhYYS0xMDItMTAyLnBuZycsIHRhZzogJ+mCruWvhOW/q+mAkueUs+ivtycgfSwKICAgICAgICB7IGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vaW1nZXh0cmEvaTMvTzFDTjAxTExuMFlWMUxoQlhzN1QyaU9fISE2MDAwMDAwMDAxMzMwLTItdHBzLTEyMC0xMjAucG5nJywgdGFnOiAn5ZCI5ZCM5a6h5om5JyB9LAogICAgICAgIHsgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxZTc2bENPTGFLMVJqU1pGeFhYYW1QRlhhLTExMi0xMTIucG5nJywgdGFnOiAn5ZCI5ZCM5YCf6ZiFJyB9LAogICAgICAgIHsgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxZTc2bENPTGFLMVJqU1pGeFhYYW1QRlhhLTExMi0xMTIucG5nJywgdGFnOiAn6a2U54K55Li05pe25byA6Zeo5p2D6ZmQJyB9LAogICAgICAgIHsgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxYkhPV0NTenFLMVJqU1pGalhYYmxDRlhhLTExMi0xMTIucG5nJywgdGFnOiAn5YyX5Lqs56eR5oqA5Zut6L2m6K+B5a6h5om5JyB9LAogICAgICAgIHsgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxZTc2bENPTGFLMVJqU1pGeFhYYW1QRlhhLTExMi0xMTIucG5nJywgdGFnOiAn6a2U54K56K6/5a6i5o+Q5YmN6aKE57qm5a6h5om5JyB9CiAgICAgIF0sCgogICAgICB1cGxvYWRIZWFkZXJzOiB7CiAgICAgICAgJ3Rva2VuJzogc3RvcmUuZ2V0dGVycy50b2tlbgogICAgICB9LAogICAgICBmaWxlTGlzdDogW10KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQKICAgIGNvbnNvbGUubG9nKGlkKQogICAgaWYgKGlkID4gMCkgewogICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpCiAgICB9CiAgICB0aGlzLmZldGNoUHJvY2Vzc1R5cGVEYXRhKCkKICB9LAoKICBtZXRob2RzOiB7CiAgICBwcmUoKSB7CiAgICAgIHRoaXMuc3RlcEluZGV4IC09IDEKICAgIH0sCgogICAgbmV4dCgpIHsKICAgICAgaWYgKHRoaXMuc3RlcEluZGV4ID09PSAyKSB7CiAgICAgICAgdGhpcy5wcm9jZXNzVGVtcGxhdGUuZm9ybVByb3BzID0gSlNPTi5zdHJpbmdpZnkodGhpcy4kcmVmcy5kZXNpZ25lci5nZXRSdWxlKCkpCiAgICAgICAgdGhpcy5wcm9jZXNzVGVtcGxhdGUuZm9ybU9wdGlvbnMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRyZWZzLmRlc2lnbmVyLmdldE9wdGlvbigpKQogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMucHJvY2Vzc1RlbXBsYXRlKSkKICAgICAgfQogICAgICBpZiAodGhpcy5zdGVwSW5kZXggPT09IDMpIHsKICAgICAgICB0aGlzLnNhdmVPclVwZGF0ZSgpCiAgICAgIH0KCiAgICAgIHRoaXMuc3RlcEluZGV4ICs9IDEKICAgIH0sCgogICAgZmV0Y2hQcm9jZXNzVHlwZURhdGEoKSB7CiAgICAgIHByb2Nlc3NUeXBlQXBpLmZpbmRBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnByb2Nlc3NUeXBlTGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICBmZXRjaERhdGFCeUlkKGlkKSB7CiAgICAgIGFwaS5nZXRCeUlkKGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnByb2Nlc3NUZW1wbGF0ZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAvLyDnu5nooajljZXorr7orqHlmajotYvlgLwKICAgICAgICB0aGlzLiRyZWZzLmRlc2lnbmVyLnNldFJ1bGUoSlNPTi5wYXJzZSh0aGlzLnByb2Nlc3NUZW1wbGF0ZS5mb3JtUHJvcHMpKQogICAgICAgIHRoaXMuJHJlZnMuZGVzaWduZXIuc2V0T3B0aW9uKEpTT04ucGFyc2UodGhpcy5wcm9jZXNzVGVtcGxhdGUuZm9ybU9wdGlvbnMpKQogICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbewogICAgICAgICAgbmFtZTogdGhpcy5wcm9jZXNzVGVtcGxhdGUucHJvY2Vzc0RlZmluaXRpb25QYXRoLAogICAgICAgICAgdXJsOiB0aGlzLnByb2Nlc3NUZW1wbGF0ZS5wcm9jZXNzRGVmaW5pdGlvblBhdGgKICAgICAgICB9XQogICAgICB9KQogICAgfSwKCiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZSAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgaWYgKCF0aGlzLnByb2Nlc3NUZW1wbGF0ZS5pZCkgewogICAgICAgIHRoaXMuc2F2ZURhdGEoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlRGF0YSgpCiAgICAgIH0KICAgIH0sCgogICAgLy8g5paw5aKeCiAgICBzYXZlRGF0YSgpIHsKICAgICAgYXBpLnNhdmUodGhpcy5wcm9jZXNzVGVtcGxhdGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcHJvY2Vzc1NldC9wcm9jZXNzVGVtcGxhdGUnKQogICAgICB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YSgpIHsKICAgICAgYXBpLnVwZGF0ZUJ5SWQodGhpcy5wcm9jZXNzVGVtcGxhdGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcHJvY2Vzc1NldC9wcm9jZXNzVGVtcGxhdGUnKQogICAgICB9KQogICAgfSwKCiAgICAvLyDmlofku7bkuIrkvKDpmZDliLbmnaHku7YKICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzWmlwID0gZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24veC16aXAtY29tcHJlc3NlZCcKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyCgogICAgLy8gICBpZiAoIWlzWmlwKSB7CiAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5paH5Lu25qC85byP5LiN5q2j56GuIScpCiAgICAvLyAgICAgcmV0dXJuIGZhbHNlCiAgICAvLyAgIH0KICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpKflsI/kuI3og73otoXov4cgMk1CIScpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgcmV0dXJuIHRydWUKICAgIH0sCgogICAgLy8g5LiK5Lyg5oiQ5Yqf55qE5Zue6LCDCiAgICBvblVwbG9hZFN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIC8vIOWhq+WFheS4iuS8oOaWh+S7tuWIl+ihqAogICAgICB0aGlzLnByb2Nlc3NUZW1wbGF0ZS5wcm9jZXNzRGVmaW5pdGlvblBhdGggPSByZXMuZGF0YS5wcm9jZXNzRGVmaW5pdGlvblBhdGgKICAgICAgdGhpcy5wcm9jZXNzVGVtcGxhdGUucHJvY2Vzc0RlZmluaXRpb25LZXkgPSByZXMuZGF0YS5wcm9jZXNzRGVmaW5pdGlvbktleQogICAgfSwKCiAgICBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3Byb2Nlc3NTZXQvcHJvY2Vzc1RlbXBsYXRlJykKICAgIH0KICB9Cn0K"},{"version":3,"sources":["templateSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"templateSet.vue","sourceRoot":"src/views/processSet/processTemplate","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-steps :active=\"stepIndex\" finish-status=\"success\">\n      <el-step title=\"基本设置\"></el-step>\n      <el-step title=\"表单设置\"></el-step>\n      <el-step title=\"流程设置\"></el-step>\n    </el-steps>\n\n    <div class=\"tools-div\">\n      <el-button v-if=\"stepIndex > 1\" icon=\"el-icon-check\" type=\"primary\" size=\"small\" @click=\"pre()\" round>上一步\n      </el-button>\n      <el-button icon=\"el-icon-check\" type=\"primary\" size=\"small\" @click=\"next()\" round>{{\n          stepIndex == 3 ? '提交保存' : '下一步'\n        }}\n      </el-button>\n      <el-button type=\"primary\" size=\"small\" @click=\"back()\">返回</el-button>\n    </div>\n\n    <!-- 第一步 -->\n    <div v-show=\"stepIndex == 1\" style=\"margin-top: 20px;\">\n      <el-form ref=\"flashPromotionForm\" label-width=\"150px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"审批类型\">\n          <el-select v-model=\"processTemplate.processTypeId\" placeholder=\"请选择审批类型\">\n            <el-option v-for=\"item in processTypeList\" :label=\"item.name\" :value=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"审批名称\">\n          <el-input v-model=\"processTemplate.name\"/>\n        </el-form-item>\n        <el-form-item label=\"审批图标\">\n          <el-select v-model=\"processTemplate.iconUrl\" placeholder=\"请选择审批图标\">\n            <el-option v-for=\"item in iconUrlList\" :label=\"item.iconUrl\" :value=\"item.iconUrl\">\n              <img :src=\"item.iconUrl\" style=\"width: 30px;height: 30px;vertical-align: text-bottom;\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"processTemplate.description\"/>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 第二步 -->\n    <div v-show=\"stepIndex == 2\" style=\"margin-top: 20px;\">\n      <!--表单构建器-->\n      <fc-designer class=\"form-build\" ref=\"designer\"/>\n    </div>\n\n    <!-- 第三步 -->\n    <div v-show=\"stepIndex == 3\" style=\"margin-top: 20px;\">\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"/dev-api/admin/process/processTemplate/uploadProcessDefinition\"\n        :headers=\"uploadHeaders\"\n        multiple=\"false\"\n        :before-upload=\"beforeUpload\"\n        :on-success=\"onUploadSuccess\"\n        :file-list=\"fileList\"\n      >\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将Activiti流程设计文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传zip压缩文件，且不超过2048kb</div>\n      </el-upload>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/process/processTemplate'\nimport processTypeApi from '@/api/process/processType'\nimport store from '@/store'\n\nconst defaultForm = {\n  id: '',\n  name: '',\n  iconUrl: '',\n  formProps: '',\n  formOptions: '',\n  processDefinitionKey: '',\n  processDefinitionPath: '',\n  description: ''\n}\nexport default {\n  data() {\n    return {\n      stepIndex: 1,\n      processTypeList: [],\n      processTemplate: defaultForm,\n      iconUrlList: [\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png', tag: '请假' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png', tag: '出差' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png', tag: '机票出差' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png', tag: '机票改签' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '外出' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png', tag: '补卡申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Y8PlCNjaK1RjSZKzXXXVwXXa-112-112.png', tag: '加班' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB11X99CNTpK1RjSZFKXXa2wXXa-102-102.png', tag: '居家隔离' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '请假' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB13ca1CMDqK1RjSZSyXXaxEVXa-102-102.png', tag: '调岗' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1U9iBCSzqK1RjSZPcXXbTepXa-102-102.png', tag: '离职' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB11pS_CFzqK1RjSZSgXXcpAVXa-102-102.png', tag: '费用申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png', tag: '用章申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB13f_aCQzoK1RjSZFlXXai4VXa-102-102.png', tag: '携章外出' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '学期内分期' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '特殊学费' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png', tag: '充值卡申领' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '礼品申领' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1FNG.CMHqK1RjSZFgXXa7JXXa-102-102.png', tag: '邮寄快递申请' },\n        { iconUrl: 'https://gw.alicdn.com/imgextra/i3/O1CN01LLn0YV1LhBXs7T2iO_!!6000000001330-2-tps-120-120.png', tag: '合同审批' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '合同借阅' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '魔点临时开门权限' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png', tag: '北京科技园车证审批' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '魔点访客提前预约审批' }\n      ],\n\n      uploadHeaders: {\n        'token': store.getters.token\n      },\n      fileList: []\n    }\n  },\n\n  created() {\n    let id = this.$route.query.id\n    console.log(id)\n    if (id > 0) {\n      this.fetchDataById(id)\n    }\n    this.fetchProcessTypeData()\n  },\n\n  methods: {\n    pre() {\n      this.stepIndex -= 1\n    },\n\n    next() {\n      if (this.stepIndex === 2) {\n        this.processTemplate.formProps = JSON.stringify(this.$refs.designer.getRule())\n        this.processTemplate.formOptions = JSON.stringify(this.$refs.designer.getOption())\n        console.log(JSON.stringify(this.processTemplate))\n      }\n      if (this.stepIndex === 3) {\n        this.saveOrUpdate()\n      }\n\n      this.stepIndex += 1\n    },\n\n    fetchProcessTypeData() {\n      processTypeApi.findAll().then(response => {\n        this.processTypeList = response.data\n      })\n    },\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        this.processTemplate = response.data\n        // 给表单设计器赋值\n        this.$refs.designer.setRule(JSON.parse(this.processTemplate.formProps))\n        this.$refs.designer.setOption(JSON.parse(this.processTemplate.formOptions))\n        this.fileList = [{\n          name: this.processTemplate.processDefinitionPath,\n          url: this.processTemplate.processDefinitionPath\n        }]\n      })\n    },\n\n    saveOrUpdate() {\n      this.saveBtnDisabled = true // 防止表单重复提交\n      if (!this.processTemplate.id) {\n        this.saveData()\n      } else {\n        this.updateData()\n      }\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.processTemplate).then(response => {\n        this.$router.push('/processSet/processTemplate')\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.processTemplate).then(response => {\n        this.$router.push('/processSet/processTemplate')\n      })\n    },\n\n    // 文件上传限制条件\n    beforeUpload(file) {\n      const isZip = file.type === 'application/x-zip-compressed'\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n    //   if (!isZip) {\n    //     this.$message.error('文件格式不正确!')\n    //     return false\n    //   }\n      if (!isLt2M) {\n        this.$message.error('上传大小不能超过 2MB!')\n        return false\n      }\n      return true\n    },\n\n    // 上传成功的回调\n    onUploadSuccess(res, file) {\n      // 填充上传文件列表\n      this.processTemplate.processDefinitionPath = res.data.processDefinitionPath\n      this.processTemplate.processDefinitionKey = res.data.processDefinitionKey\n    },\n\n    back() {\n      this.$router.push('/processSet/processTemplate')\n    }\n  }\n}\n</script>"]}]}