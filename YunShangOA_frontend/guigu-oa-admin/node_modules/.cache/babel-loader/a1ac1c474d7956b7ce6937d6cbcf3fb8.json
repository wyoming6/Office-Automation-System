{"remainingRequest":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/babel-loader/lib/index.js!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/processSet/processTemplate/templateSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/src/views/processSet/processTemplate/templateSet.vue","mtime":1684965622138},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/babel.config.js","mtime":1682639355350},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/catherine_sun/Documents/CS degree/Projects/YunShangOA/YunShangOA_frontend/guigu-oa-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IGFwaSBmcm9tICdAL2FwaS9wcm9jZXNzL3Byb2Nlc3NUZW1wbGF0ZSc7CmltcG9ydCBwcm9jZXNzVHlwZUFwaSBmcm9tICdAL2FwaS9wcm9jZXNzL3Byb2Nlc3NUeXBlJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwp2YXIgZGVmYXVsdEZvcm0gPSB7CiAgaWQ6ICcnLAogIG5hbWU6ICcnLAogIGljb25Vcmw6ICcnLAogIGZvcm1Qcm9wczogJycsCiAgZm9ybU9wdGlvbnM6ICcnLAogIHByb2Nlc3NEZWZpbml0aW9uS2V5OiAnJywKICBwcm9jZXNzRGVmaW5pdGlvblBhdGg6ICcnLAogIGRlc2NyaXB0aW9uOiAnJwp9OwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0ZXBJbmRleDogMSwKICAgICAgcHJvY2Vzc1R5cGVMaXN0OiBbXSwKICAgICAgcHJvY2Vzc1RlbXBsYXRlOiBkZWZhdWx0Rm9ybSwKICAgICAgaWNvblVybExpc3Q6IFt7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxdDY5NUNGWXFLMVJqU1pMZVhYYlhwcFhhLTEwMi0xMDIucG5nJywKICAgICAgICB0YWc6ICfor7flgYcnCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjFiSE9XQ1N6cUsxUmpTWkZqWFhibENGWGEtMTEyLTExMi5wbmcnLAogICAgICAgIHRhZzogJ+WHuuW3ricKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWNiQ1lDUFRwSzFSalNaS1BYWGEzVXBYYS0xMTItMTEyLnBuZycsCiAgICAgICAgdGFnOiAn5py656Wo5Ye65beuJwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxY2JDWUNQVHBLMVJqU1pLUFhYYTNVcFhhLTExMi0xMTIucG5nJywKICAgICAgICB0YWc6ICfmnLrnpajmlLnnrb4nCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjFlNzZsQ09MYUsxUmpTWkZ4WFhhbVBGWGEtMTEyLTExMi5wbmcnLAogICAgICAgIHRhZzogJ+WkluWHuicKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMVlmYTBDRzZxSzFSalNaRm1YWFgwUEZYYS0xMTItMTEyLnBuZycsCiAgICAgICAgdGFnOiAn6KGl5Y2h55Sz6K+3JwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxWThQbENOamFLMVJqU1pLelhYWFZ3WFhhLTExMi0xMTIucG5nJywKICAgICAgICB0YWc6ICfliqDnj60nCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjExWDk5Q05UcEsxUmpTWkZLWFhhMndYWGEtMTAyLTEwMi5wbmcnLAogICAgICAgIHRhZzogJ+WxheWutumalOemuycKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMV9ZRy5DT3JwSzFSalNaRmhYWFhTZFhYYS0xMDItMTAyLnBuZycsCiAgICAgICAgdGFnOiAn6K+35YGHJwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxM2NhMUNNRHFLMVJqU1pTeVhYYXhFVlhhLTEwMi0xMDIucG5nJywKICAgICAgICB0YWc6ICfosIPlspcnCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjFVOWlCQ1N6cUsxUmpTWlBjWFhiVGVwWGEtMTAyLTEwMi5wbmcnLAogICAgICAgIHRhZzogJ+emu+iBjCcKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMTFwU19DRnpxSzFSalNaU2dYWGNwQVZYYS0xMDItMTAyLnBuZycsCiAgICAgICAgdGFnOiAn6LS555So55Sz6K+3JwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxdDY5NUNGWXFLMVJqU1pMZVhYYlhwcFhhLTEwMi0xMDIucG5nJywKICAgICAgICB0YWc6ICfnlKjnq6DnlLPor7cnCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjEzZl9hQ1F6b0sxUmpTWkZsWFhhaTRWWGEtMTAyLTEwMi5wbmcnLAogICAgICAgIHRhZzogJ+aQuueroOWkluWHuicKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMV9ZRy5DT3JwSzFSalNaRmhYWFhTZFhYYS0xMDItMTAyLnBuZycsCiAgICAgICAgdGFnOiAn5a2m5pyf5YaF5YiG5pyfJwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxX1lHLkNPcnBLMVJqU1pGaFhYWFNkWFhhLTEwMi0xMDIucG5nJywKICAgICAgICB0YWc6ICfnibnmrorlrabotLknCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjFZZmEwQ0c2cUsxUmpTWkZtWFhYMFBGWGEtMTEyLTExMi5wbmcnLAogICAgICAgIHRhZzogJ+WFheWAvOWNoeeUs+mihicKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWU3NmxDT0xhSzFSalNaRnhYWGFtUEZYYS0xMTItMTEyLnBuZycsCiAgICAgICAgdGFnOiAn56S85ZOB55Sz6aKGJwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxRk5HLkNNSHFLMVJqU1pGZ1hYYTdKWFhhLTEwMi0xMDIucG5nJywKICAgICAgICB0YWc6ICfpgq7lr4Tlv6vpgJLnlLPor7cnCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL2ltZ2V4dHJhL2kzL08xQ04wMUxMbjBZVjFMaEJYczdUMmlPXyEhNjAwMDAwMDAwMTMzMC0yLXRwcy0xMjAtMTIwLnBuZycsCiAgICAgICAgdGFnOiAn5ZCI5ZCM5a6h5om5JwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxZTc2bENPTGFLMVJqU1pGeFhYYW1QRlhhLTExMi0xMTIucG5nJywKICAgICAgICB0YWc6ICflkIjlkIzlgJ/pmIUnCiAgICAgIH0sIHsKICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9ndy5hbGljZG4uY29tL3Rmcy9UQjFlNzZsQ09MYUsxUmpTWkZ4WFhhbVBGWGEtMTEyLTExMi5wbmcnLAogICAgICAgIHRhZzogJ+mtlOeCueS4tOaXtuW8gOmXqOadg+mZkCcKICAgICAgfSwgewogICAgICAgIGljb25Vcmw6ICdodHRwczovL2d3LmFsaWNkbi5jb20vdGZzL1RCMWJIT1dDU3pxSzFSalNaRmpYWGJsQ0ZYYS0xMTItMTEyLnBuZycsCiAgICAgICAgdGFnOiAn5YyX5Lqs56eR5oqA5Zut6L2m6K+B5a6h5om5JwogICAgICB9LCB7CiAgICAgICAgaWNvblVybDogJ2h0dHBzOi8vZ3cuYWxpY2RuLmNvbS90ZnMvVEIxZTc2bENPTGFLMVJqU1pGeFhYYW1QRlhhLTExMi0xMTIucG5nJywKICAgICAgICB0YWc6ICfprZTngrnorr/lrqLmj5DliY3pooTnuqblrqHmibknCiAgICAgIH1dLAogICAgICB1cGxvYWRIZWFkZXJzOiB7CiAgICAgICAgJ3Rva2VuJzogc3RvcmUuZ2V0dGVycy50b2tlbgogICAgICB9LAogICAgICBmaWxlTGlzdDogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICBjb25zb2xlLmxvZyhpZCk7CiAgICBpZiAoaWQgPiAwKSB7CiAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCk7CiAgICB9CiAgICB0aGlzLmZldGNoUHJvY2Vzc1R5cGVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmU6IGZ1bmN0aW9uIHByZSgpIHsKICAgICAgdGhpcy5zdGVwSW5kZXggLT0gMTsKICAgIH0sCiAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICBpZiAodGhpcy5zdGVwSW5kZXggPT09IDIpIHsKICAgICAgICB0aGlzLnByb2Nlc3NUZW1wbGF0ZS5mb3JtUHJvcHMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRyZWZzLmRlc2lnbmVyLmdldFJ1bGUoKSk7CiAgICAgICAgdGhpcy5wcm9jZXNzVGVtcGxhdGUuZm9ybU9wdGlvbnMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRyZWZzLmRlc2lnbmVyLmdldE9wdGlvbigpKTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnByb2Nlc3NUZW1wbGF0ZSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnN0ZXBJbmRleCA9PT0gMykgewogICAgICAgIHRoaXMuc2F2ZU9yVXBkYXRlKCk7CiAgICAgIH0KICAgICAgdGhpcy5zdGVwSW5kZXggKz0gMTsKICAgIH0sCiAgICBmZXRjaFByb2Nlc3NUeXBlRGF0YTogZnVuY3Rpb24gZmV0Y2hQcm9jZXNzVHlwZURhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHByb2Nlc3NUeXBlQXBpLmZpbmRBbGwoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnByb2Nlc3NUeXBlTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoRGF0YUJ5SWQ6IGZ1bmN0aW9uIGZldGNoRGF0YUJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGFwaS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5wcm9jZXNzVGVtcGxhdGUgPSByZXNwb25zZS5kYXRhOwogICAgICAgIC8vIOe7meihqOWNleiuvuiuoeWZqOi1i+WAvAogICAgICAgIF90aGlzMi4kcmVmcy5kZXNpZ25lci5zZXRSdWxlKEpTT04ucGFyc2UoX3RoaXMyLnByb2Nlc3NUZW1wbGF0ZS5mb3JtUHJvcHMpKTsKICAgICAgICBfdGhpczIuJHJlZnMuZGVzaWduZXIuc2V0T3B0aW9uKEpTT04ucGFyc2UoX3RoaXMyLnByb2Nlc3NUZW1wbGF0ZS5mb3JtT3B0aW9ucykpOwogICAgICAgIF90aGlzMi5maWxlTGlzdCA9IFt7CiAgICAgICAgICBuYW1lOiBfdGhpczIucHJvY2Vzc1RlbXBsYXRlLnByb2Nlc3NEZWZpbml0aW9uUGF0aCwKICAgICAgICAgIHVybDogX3RoaXMyLnByb2Nlc3NUZW1wbGF0ZS5wcm9jZXNzRGVmaW5pdGlvblBhdGgKICAgICAgICB9XTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlOiBmdW5jdGlvbiBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHRoaXMuc2F2ZUJ0bkRpc2FibGVkID0gdHJ1ZTsgLy8g6Ziy5q2i6KGo5Y2V6YeN5aSN5o+Q5LqkCiAgICAgIGlmICghdGhpcy5wcm9jZXNzVGVtcGxhdGUuaWQpIHsKICAgICAgICB0aGlzLnNhdmVEYXRhKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlrDlop4KICAgIHNhdmVEYXRhOiBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGFwaS5zYXZlKHRoaXMucHJvY2Vzc1RlbXBsYXRlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy4kcm91dGVyLnB1c2goJy9wcm9jZXNzU2V0L3Byb2Nlc3NUZW1wbGF0ZScpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YTogZnVuY3Rpb24gdXBkYXRlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGFwaS51cGRhdGVCeUlkKHRoaXMucHJvY2Vzc1RlbXBsYXRlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goJy9wcm9jZXNzU2V0L3Byb2Nlc3NUZW1wbGF0ZScpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlofku7bkuIrkvKDpmZDliLbmnaHku7YKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzWmlwID0gZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24veC16aXAtY29tcHJlc3NlZCc7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CgogICAgICAvLyAgIGlmICghaXNaaXApIHsKICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aWh+S7tuagvOW8j+S4jeato+ehriEnKQogICAgICAvLyAgICAgcmV0dXJuIGZhbHNlCiAgICAgIC8vICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8vIOS4iuS8oOaIkOWKn+eahOWbnuiwgwogICAgb25VcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBvblVwbG9hZFN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIC8vIOWhq+WFheS4iuS8oOaWh+S7tuWIl+ihqAogICAgICB0aGlzLnByb2Nlc3NUZW1wbGF0ZS5wcm9jZXNzRGVmaW5pdGlvblBhdGggPSByZXMuZGF0YS5wcm9jZXNzRGVmaW5pdGlvblBhdGg7CiAgICAgIHRoaXMucHJvY2Vzc1RlbXBsYXRlLnByb2Nlc3NEZWZpbml0aW9uS2V5ID0gcmVzLmRhdGEucHJvY2Vzc0RlZmluaXRpb25LZXk7CiAgICB9LAogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wcm9jZXNzU2V0L3Byb2Nlc3NUZW1wbGF0ZScpOwogICAgfQogIH0KfTs="},{"version":3,"names":["api","processTypeApi","store","defaultForm","id","name","iconUrl","formProps","formOptions","processDefinitionKey","processDefinitionPath","description","data","stepIndex","processTypeList","processTemplate","iconUrlList","tag","uploadHeaders","getters","token","fileList","created","$route","query","console","log","fetchDataById","fetchProcessTypeData","methods","pre","next","JSON","stringify","$refs","designer","getRule","getOption","saveOrUpdate","_this","findAll","then","response","_this2","getById","setRule","parse","setOption","url","saveBtnDisabled","saveData","updateData","_this3","save","$router","push","_this4","updateById","beforeUpload","file","isZip","type","isLt2M","size","$message","error","onUploadSuccess","res","back"],"sources":["src/views/processSet/processTemplate/templateSet.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-steps :active=\"stepIndex\" finish-status=\"success\">\n      <el-step title=\"基本设置\"></el-step>\n      <el-step title=\"表单设置\"></el-step>\n      <el-step title=\"流程设置\"></el-step>\n    </el-steps>\n\n    <div class=\"tools-div\">\n      <el-button v-if=\"stepIndex > 1\" icon=\"el-icon-check\" type=\"primary\" size=\"small\" @click=\"pre()\" round>上一步\n      </el-button>\n      <el-button icon=\"el-icon-check\" type=\"primary\" size=\"small\" @click=\"next()\" round>{{\n          stepIndex == 3 ? '提交保存' : '下一步'\n        }}\n      </el-button>\n      <el-button type=\"primary\" size=\"small\" @click=\"back()\">返回</el-button>\n    </div>\n\n    <!-- 第一步 -->\n    <div v-show=\"stepIndex == 1\" style=\"margin-top: 20px;\">\n      <el-form ref=\"flashPromotionForm\" label-width=\"150px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"审批类型\">\n          <el-select v-model=\"processTemplate.processTypeId\" placeholder=\"请选择审批类型\">\n            <el-option v-for=\"item in processTypeList\" :label=\"item.name\" :value=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"审批名称\">\n          <el-input v-model=\"processTemplate.name\"/>\n        </el-form-item>\n        <el-form-item label=\"审批图标\">\n          <el-select v-model=\"processTemplate.iconUrl\" placeholder=\"请选择审批图标\">\n            <el-option v-for=\"item in iconUrlList\" :label=\"item.iconUrl\" :value=\"item.iconUrl\">\n              <img :src=\"item.iconUrl\" style=\"width: 30px;height: 30px;vertical-align: text-bottom;\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"processTemplate.description\"/>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 第二步 -->\n    <div v-show=\"stepIndex == 2\" style=\"margin-top: 20px;\">\n      <!--表单构建器-->\n      <fc-designer class=\"form-build\" ref=\"designer\"/>\n    </div>\n\n    <!-- 第三步 -->\n    <div v-show=\"stepIndex == 3\" style=\"margin-top: 20px;\">\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"/dev-api/admin/process/processTemplate/uploadProcessDefinition\"\n        :headers=\"uploadHeaders\"\n        multiple=\"false\"\n        :before-upload=\"beforeUpload\"\n        :on-success=\"onUploadSuccess\"\n        :file-list=\"fileList\"\n      >\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将Activiti流程设计文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传zip压缩文件，且不超过2048kb</div>\n      </el-upload>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/process/processTemplate'\nimport processTypeApi from '@/api/process/processType'\nimport store from '@/store'\n\nconst defaultForm = {\n  id: '',\n  name: '',\n  iconUrl: '',\n  formProps: '',\n  formOptions: '',\n  processDefinitionKey: '',\n  processDefinitionPath: '',\n  description: ''\n}\nexport default {\n  data() {\n    return {\n      stepIndex: 1,\n      processTypeList: [],\n      processTemplate: defaultForm,\n      iconUrlList: [\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png', tag: '请假' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png', tag: '出差' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png', tag: '机票出差' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png', tag: '机票改签' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '外出' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png', tag: '补卡申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Y8PlCNjaK1RjSZKzXXXVwXXa-112-112.png', tag: '加班' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB11X99CNTpK1RjSZFKXXa2wXXa-102-102.png', tag: '居家隔离' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '请假' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB13ca1CMDqK1RjSZSyXXaxEVXa-102-102.png', tag: '调岗' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1U9iBCSzqK1RjSZPcXXbTepXa-102-102.png', tag: '离职' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB11pS_CFzqK1RjSZSgXXcpAVXa-102-102.png', tag: '费用申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png', tag: '用章申请' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB13f_aCQzoK1RjSZFlXXai4VXa-102-102.png', tag: '携章外出' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '学期内分期' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png', tag: '特殊学费' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png', tag: '充值卡申领' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '礼品申领' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1FNG.CMHqK1RjSZFgXXa7JXXa-102-102.png', tag: '邮寄快递申请' },\n        { iconUrl: 'https://gw.alicdn.com/imgextra/i3/O1CN01LLn0YV1LhBXs7T2iO_!!6000000001330-2-tps-120-120.png', tag: '合同审批' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '合同借阅' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '魔点临时开门权限' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png', tag: '北京科技园车证审批' },\n        { iconUrl: 'https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png', tag: '魔点访客提前预约审批' }\n      ],\n\n      uploadHeaders: {\n        'token': store.getters.token\n      },\n      fileList: []\n    }\n  },\n\n  created() {\n    let id = this.$route.query.id\n    console.log(id)\n    if (id > 0) {\n      this.fetchDataById(id)\n    }\n    this.fetchProcessTypeData()\n  },\n\n  methods: {\n    pre() {\n      this.stepIndex -= 1\n    },\n\n    next() {\n      if (this.stepIndex === 2) {\n        this.processTemplate.formProps = JSON.stringify(this.$refs.designer.getRule())\n        this.processTemplate.formOptions = JSON.stringify(this.$refs.designer.getOption())\n        console.log(JSON.stringify(this.processTemplate))\n      }\n      if (this.stepIndex === 3) {\n        this.saveOrUpdate()\n      }\n\n      this.stepIndex += 1\n    },\n\n    fetchProcessTypeData() {\n      processTypeApi.findAll().then(response => {\n        this.processTypeList = response.data\n      })\n    },\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        this.processTemplate = response.data\n        // 给表单设计器赋值\n        this.$refs.designer.setRule(JSON.parse(this.processTemplate.formProps))\n        this.$refs.designer.setOption(JSON.parse(this.processTemplate.formOptions))\n        this.fileList = [{\n          name: this.processTemplate.processDefinitionPath,\n          url: this.processTemplate.processDefinitionPath\n        }]\n      })\n    },\n\n    saveOrUpdate() {\n      this.saveBtnDisabled = true // 防止表单重复提交\n      if (!this.processTemplate.id) {\n        this.saveData()\n      } else {\n        this.updateData()\n      }\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.processTemplate).then(response => {\n        this.$router.push('/processSet/processTemplate')\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.processTemplate).then(response => {\n        this.$router.push('/processSet/processTemplate')\n      })\n    },\n\n    // 文件上传限制条件\n    beforeUpload(file) {\n      const isZip = file.type === 'application/x-zip-compressed'\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n    //   if (!isZip) {\n    //     this.$message.error('文件格式不正确!')\n    //     return false\n    //   }\n      if (!isLt2M) {\n        this.$message.error('上传大小不能超过 2MB!')\n        return false\n      }\n      return true\n    },\n\n    // 上传成功的回调\n    onUploadSuccess(res, file) {\n      // 填充上传文件列表\n      this.processTemplate.processDefinitionPath = res.data.processDefinitionPath\n      this.processTemplate.processDefinitionKey = res.data.processDefinitionKey\n    },\n\n    back() {\n      this.$router.push('/processSet/processTemplate')\n    }\n  }\n}\n</script>"],"mappings":"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"}]}